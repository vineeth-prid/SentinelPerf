# Example SentinelPerf configuration
# Copy to sentinelperf.yaml and customize

version: "1.0"

environments:
  local:
    target:
      base_url: "http://localhost:8080"
      health_endpoint: "/health"
      endpoints:
        - "/api/users"
        - "/api/orders"
        - "/api/products"
    
    auth:
      method: "none"  # none, token, header
      # token: "your-token-here"
      # header_name: "Authorization"
      # header_value: "Bearer your-token"
    
    telemetry:
      otel:
        enabled: false
        path: "./otel_export.json"
      logs:
        enabled: false
      prometheus:
        enabled: false
    
    load:
      initial_vus: 5
      max_vus: 50
      ramp_duration: "30s"
      hold_duration: "30s"
      error_rate_threshold: 0.05      # 5%
      p95_latency_threshold_ms: 500   # 500ms
      adaptive_step: 10
    
    # Autoscale configuration (dynamic VU ramping)
    # Autoscaling ramps VUs from initial_vus to max_vus in step_vus increments.
    # Stops ONLY when: max_vus reached OR breaking point detected (if abort_on_failure=true)
    autoscale:
      enabled: false               # Set to true to enable autoscaling
      initial_vus: 1               # Starting VUs
      step_vus: 10                 # VU increment per stage
      max_vus: 1000                # Maximum VUs to reach (NO hard cap)
      step_duration: "30s"         # Duration per stage
      abort_on_failure: true       # Stop on breaking point detection
    
    # Legacy autoscaling config (deprecated, use 'autoscale' instead)
    # load_testing:
    #   autoscaling_enabled: false
    #   max_vus_limit: 1000
    #   scale_step: 100
    
    llm:
      provider: "rules"  # ollama, rules, mock
      model: "qwen2.5:14b"
      timeout: 60
    
    recommendations:
      enabled: true
      polish_with_llm: false  # Keep false to save LLM tokens
